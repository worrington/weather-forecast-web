(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5417:function(e,t,a){Promise.resolve().then(a.bind(a,9529))},9529:function(e,t,a){"use strict";a.d(t,{default:function(){return v}});var n,r,i,s,l=a(7437),c=a(2265);function o(e){let{options:t,selectedCity:a,handleSelectedCity:n}=e;return(0,l.jsxs)("div",{className:"w-64",children:[(0,l.jsx)("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-700",children:"Selecciona un destino para conocer el clima"}),(0,l.jsxs)("select",{id:"city",name:"city",className:"mt-1 block w-full pl-3 pr-10",value:a,onChange:n,children:[(0,l.jsx)("option",{value:"",disabled:!0,children:"Seleccione un destino..."}),t.map(e=>(0,l.jsx)("option",{value:e.value,children:e.value},e.id))]})]})}let d=a(8472).Z.create({baseURL:"",timeout:1e4});async function m(){try{return(await d.get("https://search.reservamos.mx/api/v2/places")).data}catch(e){throw console.error("Error fetching city coordinates:",e),e}}async function u(e,t,a){try{return(await d.get("".concat("https://api.openweathermap.org/data/2.5/forecast","?lat=").concat(e,"&lon=").concat(t,"&appid=").concat("0eebd1fcf852d29ca0340c5c451d4c9a","&units=").concat(null!=a?a:"metric"))).data}catch(e){throw console.error("Error fetching city coordinates:",e),e}}(n=i||(i={})).Left="left",n.Right="right";let h={Clear:{color:"#f2af7c",description_es:"Cielo despejado",description_en:"Clear sky"},Mist:{color:"#B0BEC5",description_es:"Niebla",description_en:"Mist"},Snow:{color:"#E0F7FA",description_es:"Nieve",description_en:"Snow"},Thunderstorm:{color:"#4A148C",description_es:"Tormenta el\xe9ctrica",description_en:"Thunderstorm"},Clouds:{color:"#6db5d5",description_es:"Nublado",description_en:"Clouds"},Rain:{color:"#0288D1",description_es:"Lluvia",description_en:"Rain"}};(r=s||(s={})).Clear="Clear",r.Clouds="Clouds",r.Thunderstorm="Thunderstorm",r.Rain="Rain",r.Snow="Snow",r.Mist="Mist";let p=(e,t)=>e.toLocaleDateString(null!=t?t:"es-ES",{day:"2-digit",month:"short",weekday:"short"}),f=(e,t)=>{let a=new Date,[n,r,i]=e.split(":").map(Number);return a.setHours(n),a.setMinutes(r),a.setSeconds(i),a.toLocaleString(null!=t?t:"es-ES",{hour:"2-digit",minute:"2-digit",hour12:!0})},x=e=>"https://openweathermap.org/img/wn/".concat(e,"@2x.png");var y=a(6648);function w(e){let{temperature:t}=e,a=x(t.icon);return(0,l.jsxs)("div",{className:"bg-[#ffffff61] shadow-lg rounded-lg p-4 flex flex-col items-center space-y-4",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-800",children:f(t.time)}),(0,l.jsx)(y.default,{src:a,alt:"".concat(h[t.type].description_en," icon"),width:50,height:50,className:"object-contain"}),(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700",children:h[t.type].description_es}),(0,l.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[t.temp,"\xb0C"]})]},t.time)}function g(e){let{icon:t,direction:a,scrollSlider:n}=e;return(0,l.jsx)("button",{className:"absolute ".concat(a===i.Left?"left-2":"right-2"," top-1/2 transform -translate-y-1/2 bg-white p-2 w-10 h-10 rounded-full flex items-center justify-center"),onClick:()=>n(a),children:t})}var j=e=>{let{weatherData:t}=e,[a,n]=(0,c.useState)(null),r=(0,c.useRef)(null),s=e=>{n(a===e?null:e)},o=e=>{if(r.current){let{scrollLeft:t,clientWidth:a}=r.current;r.current.scrollTo({left:"left"===e?t-a:t+a,behavior:"smooth"})}},d=x(t.temperatureByTime[0].icon);return(0,l.jsxs)("div",{className:"shadow-lg rounded-lg overflow-hidden my-6",style:{backgroundColor:h[t.temperatureByTime[0].type].color},children:[(0,l.jsxs)("div",{className:"p-4 cursor-pointer flex content-center",onClick:()=>s(t.day),role:"button",tabIndex:0,onKeyDown:e=>"Enter"===e.key&&s(t.day),children:[(0,l.jsx)("div",{children:(0,l.jsx)(y.default,{src:d,alt:"s",width:150,height:150})}),(0,l.jsxs)("div",{className:"content-center",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-white text-shadow capitalize",children:p(new Date(t.day))}),(0,l.jsxs)("p",{className:"text-white",children:[" Min ",t.temp_min,"\xb0C / Max ",t.temp_max,"\xb0C"]})]})]}),a===t.day&&(0,l.jsxs)("div",{className:"relative p-4",children:[(0,l.jsx)(g,{icon:"<",direction:i.Left,scrollSlider:o}),(0,l.jsx)("div",{ref:r,className:"flex gap-4 overflow-x-scroll scrollbar-hide scroll-smooth px-8",children:t.temperatureByTime.map(e=>(0,l.jsx)(w,{temperature:e},e.time))}),(0,l.jsx)(g,{icon:">",direction:i.Right,scrollSlider:o})]})]})};function v(){let[e,t]=(0,c.useState)(""),[a,n]=(0,c.useState)([]),[r,i]=(0,c.useState)(),s=e=>a.find(t=>t.display===e),d=(0,c.useMemo)(()=>a.map(e=>{let{id:t,display:a}=e;return{id:t,value:a}}),[a]),h=(0,c.useMemo)(()=>{if(!r)return[];let e={};return r.list.forEach(t=>{let[a,n]=t.dt_txt.split(" ");e[a]||(e[a]=[]),e[a].push({temp_min:t.main.temp_min,temp_max:t.main.temp_max,temp:t.main.temp,type:t.weather[0].main,icon:t.weather[0].icon,time:n})}),Object.keys(e).map(t=>{let a=e[t],n=Math.min(...a.map(e=>e.temp_min)),r=Math.max(...a.map(e=>e.temp_max));return{day:t,temperatureByTime:a,temp_min:n,temp_max:r}})},[r]);return(0,c.useEffect)(()=>{(async()=>{try{let e=await m();n(e)}catch(e){console.error("Failed to fetch cities:",e)}})()},[]),(0,c.useEffect)(()=>{let t=async()=>{let t=s(e);if(t)try{let e=await u(t.lat,t.long);i(e)}catch(e){console.error("Failed to fetch weather data:",e)}};e&&t()},[e]),(0,l.jsxs)("div",{className:"p-8 h-lvh",children:[(0,l.jsx)("h1",{className:"py-10 text-2xl",children:"Clima"}),(0,l.jsx)(o,{options:d,handleSelectedCity:e=>{t(e.target.value)},selectedCity:e}),(0,l.jsxs)("div",{className:"w-full pt-12",children:[e&&(0,l.jsx)("p",{children:"Haga click en un d\xeda para conocer m\xe1s detalles sobre el clima."}),e&&h.map(e=>(0,l.jsx)(j,{weatherData:e},e.day))]})]})}}},function(e){e.O(0,[224,971,23,744],function(){return e(e.s=5417)}),_N_E=e.O()}]);